<!-- Html file for the root route ('/')/ landing page -->
<!DOCTYPE html>
<html lang="en">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />
		<!-- <link rel="stylesheet" type="text/css" href="../public/stylesheet/index.css"> -->
		<link rel="stylesheet" type="text/css" href="/stylesheet/index.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.0/css/bootstrap.min.css" />
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.0/js/bootstrap.min.js"></script>
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
		<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet"/>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
		<style type="text/css">
		</style>
  	</head>
	<body>
		<main>
			<div class="container-fluid wrapper">
				<div class="title">
					<h1>LoL StaTrak</h1>
				</div>
				<div class="form-inline">
					<select class="custom-select mx-md-2 region" id="reg">
						<option value="br">BR</option>
						<option value="eune">EUNE</option>
						<option value="euw">EUW</option>
						<option value="jp">JP</option>
						<option value="kr">KR</option>
						<option value="lan">LAN</option>
						<option value="las">LAS</option>
						<option value="na">NA</option>
						<option value="oce">OCE</option>
						<option value="tr">TR</option>
						<option value="ru">RU</option>
						<option value="pbe">PBE</option>
					</select>
					<input class= "form-control search-bar" type="text" placeholder="Summoner Name" aria-label="Search" id="summoner">
					<button class="btn btn-primary btn-md mx-2" type="submit" id="submit">Search</button>
				</div>
			</div>
			<div class ="summonerInfo" id="output"></div>
			<div class ="footer">
					<div class="container">
						<div class="d-flex justify-content-between">
							<div>
								&copy; 2019 Copyright Son Vu and Andre Mukhsia
							</div>
							<div>
								<a href="https://github.com/cs565-sp2019-stattracker/LoL-StatTracker">
									<i class="fa fa-github fa-md" id="icon"></i>
								</a>
							</div>
					</div>
			</div>
		</main>
	</body>
</html>

<script type ="text/javascript">

	//Contain champion data, used to get name and image of champions
	//See: https://developer.riotgames.com/static-data.html
	var championData = $.getJSON('http://ddragon.leagueoflegends.com/cdn/6.24.1/data/en_US/champion.json', function(file) {
			return file.data;
	});
	
	//URL for getting image of each champion format is "http://ddragon.leagueoflegends.com/cdn/6.24.1/img/champion/{champion name}.png"
	//example for Aatrox "http://ddragon.leagueoflegends.com/cdn/6.24.1/img/champion/Aatrox.png" 
	var championImageSquaresURL = "http://ddragon.leagueoflegends.com/cdn/6.24.1/img/champion/"

	var showInfo = function(data) {
		console.log(data);
		$('.summonerInfo').html('');
		var site = '';
		site += '<div class ="container">'
		site += '<table class="table table-striped table-dark">';
		site += '<thead>';
		site += '<tr class="table-info">';
		site += '<th scope="col">Summoner Name</th>';
		site += '<th scope="col">Rank</th>';
		site += '<th scope="col">Win Percentage</th>';
		site += '<th scope="col">League</th>';
		site += '</tr>';
		site += '</thead>';
		site += '<tbody>';
		site += '<tr>';
		site += '<th scope ="row">'+ 'eliptic' + '</th>';
		site += '<th scope ="row">'+ 'Platinum 4' + '</th>';
		site += '<th scope ="row">'+ '50.4' + '</th>';
		site += '<th scope ="row">'+ 'StickyRiceCake' + '</th>';
		site += '</tr>';
		site += '</tbody>';
		site += '</table>';
		site += '</div>'
		site += '<div class ="container">'
		site += '<table class="table table-striped table-dark">';
		site += '<thead>';
		site += '<tr>';
		site += '<th scope="col">Champion Name</th>';
		site += '<th scope="col">Champion Mastery</th>';
		site += '<th scope="col">Progress</th>';
		site += '</tr>';
		site += '</thead>';
		site += '<tbody>';
			for(var i = 0; i < 10; i+=1){
				site += '<tr>';
				site += '<th scope = "row">' + 'champion' + '</th>'
				site += '<th scope = "row">' + 'Mastery' + '</th>'
				site += '<th scope = "row">' + 'Progress' + '</th>'
				site += '</tr>';
			}
		site += '</tbody>';
		site += '</table>';
		site += '</div>'
		$('.summonerInfo').html(site);
		$('.summonerInfo').css('display', 'flex');
	};

	var showError = function(data) {
		console.log(data.responseJSON.error);
		toastr.options = {
			"closeButton": true,
			"debug": false,
			"newestOnTop": false,
			"progressBar": false,
			"positionClass": "toast-bottom-right",
			"preventDuplicates": false,
			"onclick": null,
			"showDuration": "300",
			"hideDuration": "1000",
			"timeOut": "5000",
			"extendedTimeOut": "1000",
			"showEasing": "swing",
			"hideEasing": "linear",
			"showMethod": "fadeIn",
			"hideMethod": "fadeOut"
		}
		toastr["warning"](data.responseJSON.error, "Error");
	};

	$('#submit').on('click', function(event){
		console.log("search button clicked event");
		$.ajax({
			'url' : '/frontendTest',
			'type' : 'POST',
			'data' : { region: $('#reg').val(), summoner: $('#summoner').val() },
			'success' : showInfo,
			'error' : showError
		});
		/*if (results == false){
			showError();
		}
		results = false; */
	});

	$('#summoner').on('keyup', function(event){
		console.log('keyup event');
		if(event.which === 13){
			$('#submit').click();
		}

	});

</script>


